<!DOCTYPE html>
<html>
<head>
  <title>Paper Notes Browser</title>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
    .dir { color: #0366d6; cursor: pointer; font-weight: bold; margin: 5px 0; }
    .file { color: #24292e; margin: 3px 0; display: block; }
    .dir::before { content: "ðŸ“‚ "; }
    .file::before { content: "ðŸ“„ "; }
    ul { list-style: none; padding-left: 15px; border-left: 1px dashed #ddd; }
    .hidden { display: none; }
    a { text-decoration: none; color: inherit; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <h1>ðŸ“š Paper Notes</h1>
  <div id="tree"></div>
  
  <script>
    const rawData = decodeURIComponent("[{\"name\":\"O2C.md\",\"path\":\"paper notes/OS/eBPF/O2C.md\",\"type\":\"file\",\"url\":\"https://github.com/BBBBBBlack/Black2-Notes/blob/main/paper%20notes/OS/eBPF/O2C.md\"},{\"name\":\"image-20250707211346123.png\",\"path\":\"paper notes/OS/eBPF/assets/image-20250707211346123.png\",\"type\":\"file\",\"url\":\"https://github.com/BBBBBBlack/Black2-Notes/blob/main/paper%20notes/OS/eBPF/assets/image-20250707211346123.png\"},{\"name\":\"image-20250707221913087.png\",\"path\":\"paper notes/OS/eBPF/assets/image-20250707221913087.png\",\"type\":\"file\",\"url\":\"https://github.com/BBBBBBlack/Black2-Notes/blob/main/paper%20notes/OS/eBPF/assets/image-20250707221913087.png\"},{\"name\":\"image-20250709144555328.png\",\"path\":\"paper notes/OS/eBPF/assets/image-20250709144555328.png\",\"type\":\"file\",\"url\":\"https://github.com/BBBBBBlack/Black2-Notes/blob/main/paper%20notes/OS/eBPF/assets/image-20250709144555328.png\"},{\"name\":\"cachebpf.md\",\"path\":\"paper notes/OS/eBPF/cachebpf.md\",\"type\":\"file\",\"url\":\"https://github.com/BBBBBBlack/Black2-Notes/blob/main/paper%20notes/OS/eBPF/cachebpf.md\"}]".replace(/[\\]/g, ''));
    const data = JSON.parse(rawData);
    
    // æž„å»ºå±‚çº§ç»“æž„
    function buildTree(items) {
      const tree = {};
      items.forEach(item => {
        const pathParts = item.path.replace('paper notes/', '').split('/');
        let currentLevel = tree;
        
        pathParts.slice(0, -1).forEach(part => {
          if (!currentLevel[part]) {
            currentLevel[part] = {};
          }
          currentLevel = currentLevel[part];
        });
        
        currentLevel[pathParts[pathParts.length - 1]] = item;
      });
      return tree;
    }
    
    // æ¸²æŸ“HTML
    function renderTree(node, path = '', level = 0) {
      let html = '<ul' + (level === 0 ? '' : ' class="hidden"') + '>';
      Object.keys(node).forEach(key => {
        const item = node[key];
        if (item.url) {
          html += `<li class="file"><a href="${item.url}" target="_blank">${key}</a></li>`;
        } else {
          html += `<li class="dir"><span onclick="toggleDir(this)">${key}</span>`;
          html += renderTree(item, `${path}${key}/`, level + 1);
          html += `</li>`;
        }
      });
      return html + '</ul>';
    }

    function toggleDir(span) {
      const li = span.parentElement;
      const ul = li.querySelector('ul');
      if (ul) ul.classList.toggle('hidden');
    }

    
    document.getElementById('tree').innerHTML = renderTree(buildTree(data));
    
    // é»˜è®¤å±•å¼€ç¬¬ä¸€çº§
    document.querySelectorAll('#tree > ul > li.dir').forEach(el => {
      el.querySelector('ul').classList.remove('hidden');
    });
  </script>
</body>
</html>
